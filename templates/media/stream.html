{% extends 'layout.html' %}


{% block content %}
<div id="media-management" class="container" data-back="{{ url_for('list-streams') }}">
  {% if user_can_modify %}
  <h2>Editing &quot;{{stream.title}}&quot;</h2>
  {% endif %}
  <div class="form-group">
    {% set extra_buttons %}
    {% if user_can_modify %}
    <a href="{{url_for('delete-stream', spk=stream.pk)}}"
       class="btn btn-danger delete-stream"
       data-id="{{stream.pk}}">Delete &quot;{{stream.title}}&quot;</a>
    {% endif %}
    {% endset %}
  </div>
  {% set cancel_url = url_for('list-streams') %}
  {% include 'edit-model-form.html' %}
  <table class="table table-striped" id="media-files" data-csrf="{{csrf_tokens.files}}">
    <caption>Media Files</caption>
    <thead>
      <tr>
	{% if user_can_modify %}
	<th class="index"></th>
	<th class="delete"></th>
	{% endif %}
	<th class="filename">Name</th>
	<th class="filesize">Size</th>
	<th class="created">Created</th>
	<th class="sha1-hash">SHA1</th>
	<th class="contentType">Type</th>
	<th class="codec">Codec</th>
	<th class="kid">KID</th>
      </tr>
    </thead>
    <tbody>
      {% for media in media_files %}
      {% include "media/media_row.html" %}
      {% endfor %}
      <tr class="error-row"><td class="error" colspan="8"></td></tr>
    </tbody>
  </table>
  {% include "media/keys_table.html" %}
  {% if user_can_modify %}
  <div class="form-container">
    {% include "media/upload_file_form.html" %}
  </div>
  {% endif %}
</div>

{% include "dialogbox.html" %}
{% endblock %}

{% block extrascripts %}
<script src="{{url_for('static', filename='js/media.js')}}" type="text/javascript"></script>
{% endblock %}
